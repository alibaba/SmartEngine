<?xml version="1.0" encoding="UTF-8"?>
<definitions id="test-parallel" version="1.0.0"
             xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
             xmlns:smart="http://smart.alibaba-inc.com/schema/process"
             targetNamespace="Examples">

	<process id="parallelTest">

		<startEvent id="theStart">
			<smart:script type="groovy">start();</smart:script>
		</startEvent>

		<sequenceFlow id="flow1" sourceRef="theStart" targetRef="forkGw"/>

		<parallelGateway id="forkGw" name="Fork Gateway"/>

		<sequenceFlow id="flow2" sourceRef="forkGw" targetRef="theTask1">
			<smart:script type="groovy">runSequenceFlow(flow2);</smart:script>
		</sequenceFlow>

		<sequenceFlow id="flow3" sourceRef="forkGw" targetRef="theTask2">
			<smart:script type="groovy">runSequenceFlow(flow3);</smart:script>
		</sequenceFlow>

		<serviceTask id="theTask1" name="Task 1">
			<smart:script type="groovy">run(theTask1);</smart:script>
		</serviceTask>

		<sequenceFlow id="flow4" sourceRef="theTask1" targetRef="theTask3"/>

		<serviceTask id="theTask2" name="Task 2">
			<smart:script type="groovy">run(theTask2);</smart:script>
		</serviceTask>

		<sequenceFlow id="flow5" sourceRef="theTask2" targetRef="theTask4"/>

		<serviceTask id="theTask3" name="Task 3">
			<smart:script type="groovy">run(theTask3);</smart:script>
		</serviceTask>

		<sequenceFlow id="flow6" sourceRef="theTask3" targetRef="joinGw">
			<smart:script type="groovy">runSequenceFlow(flow6);</smart:script>
		</sequenceFlow>

		<serviceTask id="theTask4" name="Task 4">
			<smart:script type="groovy">run(theTask4);</smart:script>
		</serviceTask>

		<sequenceFlow id="flow7" sourceRef="theTask4" targetRef="joinGw">
			<smart:script type="groovy">runSequenceFlow(flow7);</smart:script>
		</sequenceFlow>

		<parallelGateway id="joinGw" name="Join Gateway">
			<smart:script type="groovy">join();</smart:script>
		</parallelGateway>

		<sequenceFlow id="flow8" sourceRef="joinGw" targetRef="theTask5">
			<smart:script type="groovy">runSequenceFlow(flow8);</smart:script>
		</sequenceFlow>

		<serviceTask id="theTask5" name="Task 5">
			<smart:script type="groovy">run(theTask5);</smart:script>
		</serviceTask>

		<sequenceFlow id="flow9" sourceRef="theTask5" targetRef="theEnd"/>

		<endEvent id="theEnd"/>

	</process>

</definitions>
